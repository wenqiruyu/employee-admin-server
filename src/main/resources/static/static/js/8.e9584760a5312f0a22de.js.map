{"version":3,"sources":["webpack:///src/components/page/weChat.vue","webpack:///./src/components/page/weChat.vue?28cc","webpack:///./src/components/page/weChat.vue"],"names":["weChat","name","data","username","chatMessage","webSocket","chatAllMessage","created","this","initWebSocket","methods","_this","localStorage","getItem","WebSocket","onopen","console","log","onmessage","evt","result","JSON","parse","code","push","onclose","window","onbeforeunload","websocket","close","sendMessage","send","userFriend","_this2","$axios","post","params","then","res","setItem","ruleForm","$router","msg","page_weChat","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","separator","_v","_m","_l","value","key","index","_s","_e","staticStyle","float","type","placeholder","maxlength","show-word-limit","resize","size","rows","model","callback","$$v","expression","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.e9584760a5312f0a22de.js","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"crumbs\">\r\n            <el-breadcrumb separator=\"/\">\r\n                <el-breadcrumb-item><i class=\"iconfont icon-wen-home\"></i> 系统首页</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"container\">\r\n            <div class=\"index-title\">\r\n                <span>启明星在线聊天室</span>\r\n            </div>\r\n            <div class=\"index-chat\">\r\n                <!-- 处于和我聊天状态用户列表 -->\r\n                <div class=\"now-chat-list\">\r\n                    <el-card class=\"now-chat-list-card\">\r\n                        \r\n                    </el-card>\r\n                </div>\r\n                <div class=\"chat-center\">\r\n                    <!-- 当前聊天状态用户信息 -->\r\n                    <div class=\"chat-user-info\">\r\n                        <el-card class=\"chat-user-info-card\">\r\n                            \r\n                            \r\n                        </el-card>\r\n                    </div>\r\n                    <!-- 聊天信息展示位置 -->\r\n                    <div class=\"chat-content-show\">\r\n                        <el-card class=\"chat-content-show-card\">\r\n                            <div v-for=\"(value,key,index) in chatAllMessage\" :key=\"index\">\r\n                                <div v-if=\"value.username == 'venus'\" class=\"chat-content-show-card-tips\">\r\n                                    <span>{{value.chatMessage}}</span>\r\n                                </div>\r\n                                <div v-if=\"value.username == username\" class=\"chat-content-show-card-msg\">\r\n                                    <el-tag type=\"success\" style=\"float:right\">\r\n                                        {{value.username}}：{{value.chatMessage}}\r\n                                    </el-tag>\r\n                                    <br/>\r\n                                </div>\r\n                                <div v-if=\"value.username != username && value.username != 'venus'\" class=\"chat-content-show-card-msg\">\r\n                                    <el-tag style=\"float:left\">\r\n                                        {{value.username}}：{{value.chatMessage}}\r\n                                    </el-tag>\r\n                                    <br/>\r\n                                </div>\r\n                            </div>\r\n                        </el-card>\r\n                    </div>\r\n                    <!-- 聊天信息输入位置 -->\r\n                    <div class=\"chat-content-input\">\r\n                        <el-card class=\"chat-content-input-card\">\r\n                            <div class=\"chat-content-input-message\">\r\n                                <el-input type=\"textarea\" placeholder=\"请输入内容\" v-model=\"chatMessage\" maxlength=\"200\" show-word-limit resize=\"none\"\r\n                                size=\"medium\" rows=\"4\">\r\n                                </el-input>\r\n                            </div>\r\n                            <div class=\"chat-content-input-button\">\r\n                                <el-button type=\"text\" class=\"button\" @click=\"sendMessage\">发送</el-button>\r\n                            </div>\r\n                        </el-card>\r\n                    </div>\r\n                </div>\r\n                <!-- 用户好友列表 -->\r\n                <div class=\"chat-user-list\">\r\n                    <el-card class=\"chat-user-list-card\">\r\n                        \r\n                        \r\n                    </el-card>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'WeChat',\r\n        data(){\r\n            return {\r\n                username: '',\r\n                chatMessage: '',\r\n                webSocket: null,\r\n                chatAllMessage: [],\r\n            }\r\n        },\r\n        created() {\r\n            this.initWebSocket()\r\n        },\r\n        methods: {\r\n            initWebSocket(){\r\n                const $vm = this;\r\n                this.username = localStorage.getItem(\"venus_username\")\r\n                this.webSocket = new WebSocket('ws://localhost:10001/venus-admin-server/chat/' + this.username)\r\n                this.webSocket.onopen = function() {\r\n                    console.log('WebSocket已连接')\r\n                }\r\n\r\n                this.webSocket.onmessage = evt => {\r\n                    var result = JSON.parse(evt.data)\r\n                    if(result.code == 200){\r\n                        this.chatAllMessage.push(result.data)\r\n                    }\r\n                    console.log(evt.data)                    \r\n                    console.log('数据已接收...')\r\n                }\r\n\r\n                this.webSocket.onclose = function () {\r\n                    console.log('WebSocket连接已关闭...')\r\n                }\r\n                \r\n                window.onbeforeunload = function() {\r\n                    this.websocket.close();\r\n                }\r\n            },\r\n            sendMessage(){\r\n                if (this.chatMessage != '') {\r\n                    this.webSocket.send(this.chatMessage)\r\n                    this.chatMessage = ''\r\n                }\r\n            },\r\n            /** 查找用户的好友列表 */\r\n            userFriend(){\r\n                this.$axios.post('/venus-admin-server/user/login',params).then((res) => {\r\n                if(res.data.code == 200){\r\n                    localStorage.setItem('venus_username',this.ruleForm.username)\r\n                    localStorage.setItem('venus_token',res.data.data)\r\n                    this.$router.push('/index')\r\n                    }else{\r\n                        this.msg = res.data.msg\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .container{\r\n        height: 740px;\r\n        /* background-image: url(../../assets/img/index-bg.jpg); */\r\n    }\r\n    .index-title{\r\n        text-align: center;\r\n        font-size: 18px;\r\n        font-weight: bold;\r\n        color: #ff0000;\r\n    }\r\n    .index-chat{\r\n        margin-left: 120px;\r\n        margin-top: 10px;\r\n    }\r\n    /*处于和我聊天状态用户列表*/\r\n    .now-chat-list{\r\n        width: 15%;\r\n        margin-top: 20px;\r\n        float: left;\r\n    }\r\n    .now-chat-list-card{\r\n        height: 680px;\r\n    }\r\n    .chat-center{\r\n        float: left;\r\n        width: 55%\r\n    }\r\n    /*当前聊天状态用户信息*/\r\n    .chat-user-info{\r\n        width: 100%;\r\n        margin-top: 20px;\r\n        margin-left: 5px;\r\n        float: left;\r\n    }\r\n    .chat-user-info-card{\r\n        height: 50px;\r\n    }\r\n    /*聊天信息展示位置*/\r\n    .chat-content-show{\r\n        width: 100%;\r\n        margin-top: 5px;\r\n        margin-left: 5px;\r\n        float: left;\r\n    }\r\n    .chat-content-show-card{\r\n        height: 450px;\r\n    }\r\n    /*聊天室用户加入和退出tips提示*/\r\n    .chat-content-show-card-tips{\r\n        border:3px solid #000;\r\n        margin-top: -10px;\r\n        text-align: center;\r\n        width: 100%;\r\n        font-size: 13px;\r\n        color: #ff0000;\r\n        float: left;\r\n    }\r\n    .chat-content-show-card-msg{\r\n        width: 100%;\r\n    }\r\n    /*聊天信息输入位置*/\r\n    .chat-content-input{\r\n        width: 100%;\r\n        margin-top: 5px;\r\n        margin-left: 5px;\r\n        float: left;\r\n    }\r\n    .chat-content-input-card{\r\n        height: 165px;\r\n    }\r\n    .chat-content-input-message{\r\n        height: 100px;\r\n    }\r\n    .chat-content-input-button{\r\n        float: left;\r\n        margin-left: 500px;\r\n    }\r\n    /*用户好友列表*/\r\n    .chat-user-list{\r\n        width: 20%;\r\n        margin-top: 20px;\r\n        margin-left: 10px;\r\n        float: left;\r\n    }\r\n    .chat-user-list-card{\r\n        height: 680px;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/page/weChat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"crumbs\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_c('i',{staticClass:\"iconfont icon-wen-home\"}),_vm._v(\" 系统首页\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"index-chat\"},[_c('div',{staticClass:\"now-chat-list\"},[_c('el-card',{staticClass:\"now-chat-list-card\"})],1),_vm._v(\" \"),_c('div',{staticClass:\"chat-center\"},[_c('div',{staticClass:\"chat-user-info\"},[_c('el-card',{staticClass:\"chat-user-info-card\"})],1),_vm._v(\" \"),_c('div',{staticClass:\"chat-content-show\"},[_c('el-card',{staticClass:\"chat-content-show-card\"},_vm._l((_vm.chatAllMessage),function(value,key,index){return _c('div',{key:index},[(value.username == 'venus')?_c('div',{staticClass:\"chat-content-show-card-tips\"},[_c('span',[_vm._v(_vm._s(value.chatMessage))])]):_vm._e(),_vm._v(\" \"),(value.username == _vm.username)?_c('div',{staticClass:\"chat-content-show-card-msg\"},[_c('el-tag',{staticStyle:{\"float\":\"right\"},attrs:{\"type\":\"success\"}},[_vm._v(\"\\n                                    \"+_vm._s(value.username)+\"：\"+_vm._s(value.chatMessage)+\"\\n                                \")]),_vm._v(\" \"),_c('br')],1):_vm._e(),_vm._v(\" \"),(value.username != _vm.username && value.username != 'venus')?_c('div',{staticClass:\"chat-content-show-card-msg\"},[_c('el-tag',{staticStyle:{\"float\":\"left\"}},[_vm._v(\"\\n                                    \"+_vm._s(value.username)+\"：\"+_vm._s(value.chatMessage)+\"\\n                                \")]),_vm._v(\" \"),_c('br')],1):_vm._e()])}),0)],1),_vm._v(\" \"),_c('div',{staticClass:\"chat-content-input\"},[_c('el-card',{staticClass:\"chat-content-input-card\"},[_c('div',{staticClass:\"chat-content-input-message\"},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入内容\",\"maxlength\":\"200\",\"show-word-limit\":\"\",\"resize\":\"none\",\"size\":\"medium\",\"rows\":\"4\"},model:{value:(_vm.chatMessage),callback:function ($$v) {_vm.chatMessage=$$v},expression:\"chatMessage\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"chat-content-input-button\"},[_c('el-button',{staticClass:\"button\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.sendMessage}},[_vm._v(\"发送\")])],1)])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"chat-user-list\"},[_c('el-card',{staticClass:\"chat-user-list-card\"})],1)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"index-title\"},[_c('span',[_vm._v(\"启明星在线聊天室\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1e6ea750\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/page/weChat.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1e6ea750\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./weChat.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./weChat.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./weChat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1e6ea750\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./weChat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/page/weChat.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}